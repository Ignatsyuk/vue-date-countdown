(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.DateCountdown={},a.Vue))})(this,function(a,e){"use strict";const m={class:"date-countdown"},d={__name:"DateCountdown",props:{endDate:{type:[Date,Number,String],required:!0},startDate:{type:[Date,Number,String],default:new Date},endText:{type:String,default:"0 seconds"}},setup(o){const u=o,l=e.ref(100),c=e.ref(void 0),t=e.ref({days:{text:"d",value:1},hours:{text:"h",value:1},minutes:{text:"m",value:1},seconds:{text:"s",value:1}}),v=e.computed(()=>{const{seconds:n,minutes:s,hours:r,days:i}=t.value;return!(n.value>0||s.value>0||r.value>0||i.value>0)});e.onMounted(()=>{f(),c.value=setInterval(f,1e3)}),e.onUnmounted(p);function f(){if(v.value)return p();h(),g()}function h(){const n=Date.parse(new Date(u.endDate).toString())-Date.parse(new Date().toString());n>=0?(t.value.seconds.value=Math.floor(n/1e3%60),t.value.minutes.value=Math.floor(n/1e3/60%60),t.value.hours.value=Math.floor(n/(1e3*60*60)%24),t.value.days.value=Math.floor(n/(1e3*60*60*24))):(t.value.seconds.value=t.value.minutes.value=t.value.hours.value=t.value.days.value=0,l.value=0)}function g(){let n=Date.parse(new Date(u.startDate).toString()),s=Date.parse(new Date().toString()),r=Date.parse(new Date(u.endDate).toString()),i=parseFloat((s-n)/(r-n)*100).toFixed(2);l.value=100-i}function p(){clearTimeout(c.value),l.value=0}return(n,s)=>(e.openBlock(),e.createElementBlock("span",m,[v.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(o.endText),1)],64)):e.renderSlot(n.$slots,"default",{key:1,days:t.value.days.value,hours:t.value.hours.value,minutes:t.value.minutes.value,seconds:t.value.seconds.value})]))}},D={install:(o,u)=>o.component("DateCountdown",d)};a.DateCountdown=d,a.default=D,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
