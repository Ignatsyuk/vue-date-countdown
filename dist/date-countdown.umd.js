(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.DateCountdown={},a.Vue))})(this,function(a,e){"use strict";const m={class:"date-countdown"},d={__name:"DateCountdown",props:{endDate:{type:[Date,Number,String],required:!0},startDate:{type:[Date,Number,String],default:new Date},endText:{type:String,default:"0 seconds"}},setup(o){const s=o,y=e.useSlots(),u=e.ref(100),c=e.ref(void 0),t=e.ref({days:{text:"d",value:1},hours:{text:"h",value:1},minutes:{text:"m",value:1},seconds:{text:"s",value:1}}),f=e.computed(()=>{const{seconds:n,minutes:l,hours:r,days:i}=t.value;return!(n.value>0||l.value>0||r.value>0||i.value>0)});e.onMounted(()=>{p(),c.value=setInterval(p,1e3)}),e.onUnmounted(v);function p(){if(f.value)return v();g(),h()}function g(){const n=Date.parse(new Date(s.endDate).toString())-Date.parse(new Date().toString());n>=0?(t.value.seconds.value=Math.floor(n/1e3%60),t.value.minutes.value=Math.floor(n/1e3/60%60),t.value.hours.value=Math.floor(n/(1e3*60*60)%24),t.value.days.value=Math.floor(n/(1e3*60*60*24))):(t.value.seconds.value=t.value.minutes.value=t.value.hours.value=t.value.days.value=0,u.value=0)}function h(){let n=Date.parse(new Date(s.startDate).toString()),l=Date.parse(new Date().toString()),r=Date.parse(new Date(s.endDate).toString()),i=parseFloat((l-n)/(r-n)*100).toFixed(2);u.value=100-i}function v(){clearTimeout(c.value),u.value=0}return(n,l)=>(e.openBlock(),e.createElementBlock("span",m,[f.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(o.endText),1)],64)):e.unref(y).default?e.renderSlot(n.$slots,"default",{key:1,days:t.value.days.value,hours:t.value.hours.value,minutes:t.value.minutes.value,seconds:t.value.seconds.value}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(t.value.days.value)+":"+e.toDisplayString(t.value.hours.value)+":"+e.toDisplayString(t.value.minutes.value)+":"+e.toDisplayString(t.value.seconds.value),1)],64))]))}},D={install:(o,s)=>o.component("DateCountdown",d)};a.DateCountdown=d,a.default=D,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
